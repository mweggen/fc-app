<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="fc-slave-long-desc.html">
<link rel="import" href="fc-slave.html">

<dom-module id="fc-slave-list">
  <template>
    <style>
      :host {
        display: block;

        padding: 16px;
      }

      .list {
        float: left;
      }

      .info {
        margin-left: 150px;
      }
    </style>

    <h1>List of slaves</h1>
    <!--<button on-click="_generateSlave">Generate Slave</button>-->

    <div class="list">
      <paper-listbox selected="{{_selected}}">
        <template is="dom-repeat" items="[[slaves]]">
          <paper-item>[[getSlaveFullName(item)]]</paper-item>
        </template>
      </paper-listbox>
    </div>
    <div class="info">
      <template is="dom-if" if="[[selectedSlave]]">
        <fc-slave-long-desc slave="[[selectedSlave]]"></fc-slave-long-desc>
        <paper-dropdown-menu label="Assignment" style="width: 150px">
          <paper-listbox
              slot="dropdown-content"
              attr-for-selected="name"
              selected="{{selectedSlave.assignment}}">
            <paper-item name="whore">whore</paper-item>
            <paper-item name="rest">rest</paper-item>
            <paper-item name="stay confined">stay confined</paper-item>
          </paper-listbox>
        </paper-dropdown-menu>
      </template>
    </div>
  </template>
  <script>
    class FCSlaveList extends Polymer.Element {
      static get is() {
        return 'fc-slave-list';
      }

      static get properties() {
        return {
          slaves: Array,
          _selected: {
            value: 0
          },
          selectedSlave: {
            type: Object,
            computed: '_computeSelected(_selected)'
          }
        }
      }

      ready() {
        super.ready();
/*
        if (this.slaves && this.slaves.length > 0) {
          this.selectedSlave = this.slaves[0];
        }
*/
      }

      _computeSelected(s) {
        if (s < this.slaves.length) {
          return this.slaves[s];
        }
        return null;
      }

      getSlaveFullName(slave) {
        return slave.slaveName + ' ' + slave.slaveSurname;
      }
    }

    customElements.define(FCSlaveList.is, FCSlaveList)
  </script>
</dom-module>
